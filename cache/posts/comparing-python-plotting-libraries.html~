<div id="outline-container-org8a06c93" class="outline-2">
<h2 id="org8a06c93">Introduction</h2>
<div class="outline-text-2" id="text-org8a06c93">
<p>
As mentioned in a <a href="https://jwhendy.github.io/blog/translating-r-to-python/">previous post</a>, I've been trying to pick up <code>python</code>, coming from mostly
using <code>R</code> over the past 5-7 years for data analysis, stats, and a lot of plotting. I found
<code>python</code>'s plotting landscape quite a bit more confusing than I expected, with tons of
options compared to the typical reigning <code>R</code> champions: <code>base</code>, <a href="http://lattice.r-forge.r-project.org/"><code>lattice</code></a>, and <a href="http://ggplot2.org/"><code>ggplot2</code></a>. 
</p>

<p>
Granted, there are a ton of other R contenders as well, such as <a href="https://plot.ly/r/"><code>plotly</code></a> and <a href="https://ramnathv.github.io/rCharts/"><code>rCharts</code></a>,
but the three above are the most common. I stick almost exclusively to <code>ggplot2</code>, and
rarely find something I can't do (granted, this is typical science-y stuff, not
infographics or really complicated stuff). To educate myself, I went through and plotted a
pretty standard dataset in various ways to see how one would do it in a bunch of <code>python</code>
libraries:
</p>

<ul class="org-ul">
<li><a href="http://ggplot.yhathq.com/"><code>ggpy</code></a></li>
<li><a href="https://matplotlib.org/"><code>matplotlib</code></a></li>
<li><a href="https://seaborn.pydata.org/"><code>seaborn</code></a></li>
<li><a href="https://plot.ly/python/"><code>plotly</code></a></li>
<li><a href="https://plot.ly/ipython-notebooks/cufflinks/"><code>cufflinks</code></a></li>
<li><a href="https://altair-viz.github.io/"><code>altair</code></a></li>
<li><a href="https://bokeh.pydata.org/en/latest/"><code>bokeh</code></a></li>
<li><a href="http://pygal.org/en/stable/"><code>pygal</code></a></li>
</ul>
</div>
</div>

<div id="outline-container-org69d7a4f" class="outline-2">
<h2 id="org69d7a4f">The example</h2>
<div class="outline-text-2" id="text-org69d7a4f">
<p>
I started <i>really</i> simple. Three types of plots: a simple bar, a dot plot (basically a
bar plot, but makes Tufte proud with a higher data:ink ratio), and a scatter plot colored
by group.
</p>

<p>
The bar chart in R:
</p>

<div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
data<span class="p">(</span>mtcars<span class="p">)</span>

df <span class="o">&lt;-</span> mtcars<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="p">]</span>
df<span class="o">$</span>car <span class="o">&lt;-</span> <span class="kp">rownames</span><span class="p">(</span>df<span class="p">)</span>

ggplot<span class="p">(</span>df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> car<span class="p">,</span> y <span class="o">=</span> mpg<span class="p">))</span> <span class="o">+</span> geom_bar<span class="p">(</span>stat<span class="o">=</span><span class="s">&quot;identity&quot;</span><span class="p">)</span>
</pre></div>

<p>
A dot plot:
</p>

<div class="highlight"><pre><span></span>ggplot<span class="p">(</span>df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> car<span class="p">,</span> y <span class="o">=</span> mpg<span class="p">))</span> <span class="o">+</span> geom_point<span class="p">()</span> <span class="o">+</span> expand_limits<span class="p">(</span>y<span class="o">=</span><span class="m">0</span><span class="p">)</span>
</pre></div>

<p>
And lastly, we'll use a bit more data and do a colored scatter plot:
</p>

<div class="highlight"><pre><span></span>df <span class="o">&lt;-</span> mtcars<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> <span class="p">]</span>
df<span class="o">$</span>car <span class="o">&lt;-</span> <span class="kp">rownames</span><span class="p">(</span>df<span class="p">)</span>

ggplot<span class="p">(</span>df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> wt<span class="p">,</span> y <span class="o">=</span> mpg<span class="p">,</span> colour <span class="o">=</span> car<span class="p">))</span> <span class="o">+</span> geom_point<span class="p">()</span>
</pre></div>

<p>
Here are our three plots:
</p>


<table>
  <td>
    <tr>
      <a href="../../img/r_mtcars_bar.png"><img src="../../img/r_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/r_mtcars_dot.png"><img src="../../img/r_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/r_mtcars_scatter_color.png"><img src="../../img/r_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>

<div id="outline-container-org46deb3b" class="outline-2">
<h2 id="org46deb3b">ggpy</h2>
<div class="outline-text-2" id="text-org46deb3b">
<p>
Porting <code>ggplot2</code> to <code>python</code> is an <i>amazing</i> concept. The whole idea behind the grammar
of graphics is how little the code needs to change for different visualizations. We're
only changing some mappings (some aspect of the data leads to some aesthetic) and the
geometry being used.
</p>

<p>
The above is <i>almost</i> identical using the port for the bar chart. I dislike that the
aesthetic keyword is <code>weight</code> and not simply <code>y</code>. This <a href="https://github.com/yhat/ggpy/issues/373">surprised someone else</a>, too. It
also causes there to be no y-axis label by default; I had to manually add it in.
</p>

<p>
I also don't love how <code>ggpy</code> handles limits. Note the dot plot from <code>ggplot2</code> and the
nice little padding above the highest dot. In <code>ggpy</code>, this didn't seem to work well out of
the box. I could fix it with <code>scale_y_continuous</code>, but why should I have to? This also
makes for requiring what I consider hokey, like:
</p>

<pre class="example">
... + scale_y_continuous(limits=(0, max(df['mpg'])*1.1))
</pre>

<p>
I <i>could</i> do that, but again, it's extra effort. In my own workflow, I find I'm often
visualizing some variables pretty similarly. I'll copy and paste code blocks and switch
out variable names. This is one more thing to need to remember, and perhaps the 1.1
multiplier wouldn't work so well if the data range was different by an order or two of
magnitude. Smart ranges should "just work" in my opinion.
</p>

<p>
Another complaint has to do with saving out the files. I'm not showing it below, but these
were each generated with:
</p>

<pre class="example">
p = ggplot(...)
p.save('filename.png', width=w, height=h, dpi=300)
</pre>

<p>
For the bar and dot, things were fine using <code>width=9, height=6</code> (inches), but using this
for the scatter seemed not to incorporate the legend in the width. Using the same size, I
got this:
</p>


<div class="figure">
<p><img src="../../img/ggpy_mtcars_scatter_color_crunch.png" alt="ggpy_mtcars_scatter_color_crunch.png" width="600px" />
</p>
</div>

<p>
To get the legend to fit, I had to bump the size, but that makes the text labels much
smaller with respect to the plot. In <code>ggplot</code>, I could fix this with some <code>theme()</code> options; I didn't get far
enough to hunt the equivalent in <code>ggpy</code>.
</p>

<pre class="example">
from ggplot import *

ggplot(df, aes(x='car', weight='mpg')) + geom_bar(stat='identity') + scale_y_continuous('mpg')
</pre>

<p>
For the dot plot, note the switch back to <code>y=</code>:
</p>

<pre class="example">
ggplot(df, aes(x='car', y='mpg')) + geom_point() + ylim(low=0)
</pre>

<p>
And the scatter plot:
</p>

<pre class="example">
ggplot(df, aes(x='wt', y='mpg', color='car')) + geom_point()
</pre>

<p>
Here's what we get!
</p>

<table>
  <td>
    <tr>
      <a href="../../img/ggpy_mtcars_bar.png"><img src="../../img/ggpy_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/ggpy_mtcars_dot.png"><img src="../../img/ggpy_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/ggpy_mtcars_scatter_color.png"><img src="../../img/ggpy_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>


<div id="outline-container-org2ad7f14" class="outline-2">
<h2 id="org2ad7f14">matplotlib</h2>
<div class="outline-text-2" id="text-org2ad7f14">
<p>
From my reading, this looks like the loved and hated "bread and butter" of <code>python</code>
plotting. I think the biggest complaint I've seen is the verbosity. I didn't experience
much of this, likely due to how simple these examples are.
</p>

<p>
I ran into the same quirk as with <code>ggpy</code> with respect to expanding the dot plot y-axis
limits. I could pass <code>ylim(0)</code> to get zero included, but it would cut off the top dot. I
had to do the hokey scaling bit again.
</p>

<p>
Lastly, the process of getting colors by groups was not awesome. I found I could sort of
<a href="https://stackoverflow.com/questions/26139423/plot-different-color-for-different-categorical-levels-using-matplotlib">manually map</a> each group to a color or do it the canonical way and <a href="https://stackoverflow.com/questions/43967663/scatter-plot-with-legend-colored-by-group-without-multiple-calls-to-plt-scatter">loop through</a> the data,
adding a layer of dots for each group. That also required some fiddling with the <a href="https://matplotlib.org/users/legend_guide.html#legend-location">legend location</a>.
</p>

<p>
The bar plot:
</p>

<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>
Dot plot:
</p>

<div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">])</span><span class="o">*</span><span class="mf">1.1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>
For the colored scatter plot, which I had a <a href="https://stackoverflow.com/questions/47956746/saving-matplotlib-subplot-axes-as-png-file">helluva time</a> getting to save as a file. I
originally had to just screenshot the plot from <code>jupyter lab</code>, but ended up getting the
answer, which was that my <code>plt.figure()</code> (now commented) goofs with the <code>plt.subplots()</code>
command.
</p>

<div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1"># plt.figure(figsize=(12, 9))</span>
<span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="s1">&#39;wt&#39;</span><span class="p">],</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="s1">&#39;mpg&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">ind</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<table>
  <td>
    <tr>
      <a href="../../img/mat_mtcars_bar.png"><img src="../../img/mat_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/mat_mtcars_dot.png"><img src="../../img/mat_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/mat_mtcars_scatter_color.png"><img src="../../img/mat_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>

<div id="outline-container-org64215d4" class="outline-2">
<h2 id="org64215d4">seaborn</h2>
<div class="outline-text-2" id="text-org64215d4">
<p>
Seaborn was pretty straightforward. Not much else to say!
</p>


<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;wt&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span>
	   <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<table>
  <td>
    <tr>
      <a href="../../img/sea_mtcars_bar.png"><img src="../../img/sea_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/sea_mtcars_dot.png"><img src="../../img/sea_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/sea_mtcars_scatter_color.png"><img src="../../img/sea_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>

<div id="outline-container-org06ea787" class="outline-2">
<h2 id="org06ea787">plotly</h2>
<div class="outline-text-2" id="text-org06ea787">
<p>
For these plots, I left in the <code>jupyter lab</code> commands for plotting. To save them out, I
clicked the camera icon in the <code>plotly</code> embedded plot. Surprisingly, you can <a href="https://community.plot.ly/t/use-plotly-offline-to-save-chart-as-image-file/408/28">find evidence</a>
that people want to save directly, and <a href="https://stackoverflow.com/questions/40243446/how-to-save-plotly-offline-graph-in-format-png">the solution</a> is not awesome:
</p>

<pre class="example">
plotly.offline.plot(trace, image='png', image_filename='filename')
</pre>

<p>
For me, this opens a new tab and automatically saves the file. It saves it in
<code>~/Downloads</code>, not my current directory, though.
</p>

<p>
The bar plot was pretty straightforward:
</p>

<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plotly</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>

<span class="n">plotly</span><span class="o">.</span><span class="n">offline</span><span class="o">.</span><span class="n">init_notebook_mode</span><span class="p">()</span>

<span class="n">trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">],</span>
		<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">])]</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">offline</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
</pre></div>

<p>
Same for the dot plot, though note we have to fiddle with the <code>layout</code> object to expand
our y-axis limits.
</p>

<div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">],</span>
		    <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">],</span>
		    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">)]</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">yaxis</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">])</span><span class="o">*</span><span class="mf">1.1</span><span class="p">]})</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

<span class="n">plotly</span><span class="o">.</span><span class="n">offline</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>

<p>
The colored scatter plot were where things really broke down for me. I admit that I really
<i>want</i> to love <code>python</code> and have heard it touted as one of the top data science/analysis
languages. Waaayyy back, I took quite a bit of time to research programmatic ways to do
analysis, stats, and plotting. I was really just trying to find some alternative to my
company's typical option of Minitab for this type of work. I wanted it to work from linux,
and ideally be compatible with my beloved <a href="http://orgmode.org/"><code>orgmode</code></a>. Typical contenders included <code>R</code>,
<code>python</code>, and <code>octave</code>. For better or worse, I went with <code>R</code> and sort of didn't look
back.
</p>

<p>
Now, I'm coming into <code>python</code> for some other work projects and am honestly sort of feeling
spoiled coming from <code>R</code>. It's so concise and, well, easy! It had some odd syntax for sure,
but it just feels so easy to accomplish what I want.
</p>

<p>
So, all of this is to say that I was a bit blown away going to find out how to color by
group in one of the fancy new plotting libraries (which includes paid options!) and
finding things like:
</p>

<p>
Plotly's <a href="https://plot.ly/python/line-and-scatter/#scatter-with-a-color-dimension">example</a> of "scatter with a color dimension", which is also the <a href="https://www.google.com/search?q=color+by+group+plotly+python">top google hit</a> for
"color by group plotly python."
</p>

<div class="highlight"><pre><span></span><span class="n">trace1</span> <span class="o">=</span> <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
	<span class="n">size</span><span class="o">=</span><span class="s1">&#39;16&#39;</span><span class="p">,</span>
	<span class="n">color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span> <span class="c1">#set color equal to a variable</span>
	<span class="n">colorscale</span><span class="o">=</span><span class="s1">&#39;Viridis&#39;</span><span class="p">,</span>
	<span class="n">showscale</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>
<span class="p">)]</span>
</pre></div>

<p>
That's it. The key line in there is <code>color=np.random()</code>, which only addresses a continuous color
scale. Thinking looking for <a href="https://plot.ly/python/colorscales/">color scale</a> information would be helpful also wasn't. It just
shows a bunch of ways to put up continuous colors scales, not discrete for groups.
</p>

<p>
A little further up, we have this kludge:
</p>

<div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hsl(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,50%&#39;</span><span class="o">+</span><span class="s1">&#39;,50%)&#39;</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="n">N</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">N</span><span class="p">)):</span>
    <span class="o">...</span>
    <span class="n">trace0</span><span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="o">...</span>
	<span class="n">marker</span><span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
	    <span class="o">...</span>
	    <span class="n">color</span><span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
	<span class="p">),</span> <span class="n">name</span><span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace0</span><span class="p">);</span>
</pre></div>

<p>
<a href="https://plot.ly/python/group-by/">Elsewhere</a>, <code>plotly</code> suggests this, which seems silly in and of itself, but especially for a large set:
</p>

<div class="highlight"><pre><span></span><span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;groupby&#39;</span><span class="p">,</span>
    <span class="n">groups</span> <span class="o">=</span> <span class="n">subject</span><span class="p">,</span>
    <span class="n">styles</span> <span class="o">=</span> <span class="p">[</span>
	<span class="nb">dict</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;Moe&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">))),</span>
	<span class="nb">dict</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;Larry&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">))),</span>
	<span class="nb">dict</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;Curly&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">marker</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">)))</span>
    <span class="p">]</span>
  <span class="p">)]</span>
</pre></div>

<p>
The <a href="https://stackoverflow.com/questions/43596354/plotly-change-color-by-group">highest search result</a> from SO just says to use another library (<code>colorlover</code>)!
</p>

<p>
When I see things like this, my first reaction is honestly that it must not be true;
there's <i>no way</i> I'm reading the documentation right. This is after spending a long time 
with <code>ggplot2</code>, however, where the key point is that visualization is simply about mapping
aesthetics to aspects of the data.
</p>

<p>
The above seems to make me a slave to the data&#x2026; it already constains distinctions
(unique values); why do I need to tell my plotting library how to map these to colors?
This strikes me as having to create a <code>dict()</code> mapping x and y numeric values to their
eventual locations in pixels.
</p>

<p>
Sort of by accident I stumbled on <a href="https://plot.ly/python/line-and-scatter/">this doc page</a> that didn't appear to be trying to tell me
anything about groups, but inadvertently made it evident a separate list of <code>go.Scatter</code>
objects would get me discrete colors for free. So I ended up with this:
</p>

<div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;wt&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]],</span>
		   <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;mpg&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]],</span>
		   <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">,</span>
		   <span class="n">name</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span>
		   <span class="n">text</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))]</span>

<span class="n">plotly</span><span class="o">.</span><span class="n">offline</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

<p>
To be fair, I like plotly. I like the hover text, especially for larger datasets where
colors actually aren't the best way to tell them apart. Even with these 10 cars, the
colors are hard to distinguish. The ability to put in <code>text=foo</code> is super handy. Our finished result:
</p>

<table>
  <td>
    <tr>
      <a href="../../img/plotly_mtcars_bar.png"><img src="../../img/plotly_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/plotly_mtcars_dot.png"><img src="../../img/plotly_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/plotly_mtcars_scatter_color.png"><img src="../../img/plotly_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>


<div id="outline-container-org725accf" class="outline-2">
<h2 id="org725accf">cufflinks</h2>
<div class="outline-text-2" id="text-org725accf">
<p>
I don't have much to say here; it's supposed to be a way to sort of layer <code>plotly</code> right
onto <code>pd.DataFrame</code> objects. That makes it really succinct, but I also find the
documentation lacking.
</p>

<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cufflinks</span> <span class="kn">as</span> <span class="nn">cf</span>

<span class="n">df</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">)</span>
</pre></div>

<p>
This <i>does</i> show how nice the grammar of graphics is. Other than needing to specify that
we want <code>markers</code>, we're literally just changing the <code>kind</code> of plot with the mappings
staying the same. It's just a different way to draw the same thing.
</p>

<div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers&#39;</span><span class="p">)</span>
</pre></div>

<p>
The grouped colors fell apart a bit for me again, perhaps because at the end of the day
<code>cufflinks</code> is just <code>plotly</code>. I found <a href="https://github.com/santosjorge/cufflinks/blob/master/Cufflinks%20Tutorial%20-%20Colors.ipynb">this promising</a> walkthrough, but one of the
colorscale generation examples failed me. In the
<a href="https://plot.ly/ipython-notebooks/cufflinks/#scatter-plot">cufflinks docs</a> themselves, they basically say this isn't possible and just fallback to
<code>plotly</code> syntax:
</p>

<blockquote>
<p>
Plotting multiple column scatter plots isn't as easy with cufflinks. Here is an example
with Plotly's native syntax
</p>
</blockquote>

<p>
So, I'll pass since I did this with <code>plotly</code> above already&#x2026;
</p>

<table>
  <td>
    <tr>
      <a href="../../img/cf_mtcars_bar.png"><img src="../../img/cf_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/cf_mtcars_dot.png"><img src="../../img/cf_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/plotly_mtcars_scatter_color.png"><img src="../../img/plotly_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>


<div id="outline-container-org7fde76e" class="outline-2">
<h2 id="org7fde76e">altair</h2>
<div class="outline-text-2" id="text-org7fde76e">
<p>
I learned about <code>altair</code> from one of the inspirations between this exercise, which was a
<a href="https://www.youtube.com/watch?v=FytuB8nFHPQ">talk from Jake VanderPlas</a> on the <code>python</code> visualization landscape. It was a great overview
of a bunch of what's out there, and it's even more impressive that he traced their sort of
"lineage" and how they relate to one another.
</p>

<p>
I quite enjoy <code>altair</code>; I feel like it does the grammar of graphics nicely, and it's not
too cumbersome. One downside is that I couldn't get the chart size to play along, but it
apparently works for other types, maybe just <a href="https://github.com/altair-viz/altair/issues/173#issuecomment-353702876">not bars</a>?
</p>

<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="kn">as</span> <span class="nn">alt</span>
<span class="n">alt</span><span class="o">.</span><span class="n">enable_mime_rendering</span><span class="p">()</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">)</span>
</pre></div>

<p>
Awesomely, the mapping was perfectly beautiful for adding color and I guessed, not even
looking at the syntax!
</p>

<div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;wt&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;mpg&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;car&#39;</span><span class="p">)</span>
</pre></div>

<table>
  <td>
    <tr>
      <a href="../../img/alt_mtcars_bar.png"><img src="../../img/cf_mtcars_bar.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/alt_mtcars_dot.png"><img src="../../img/cf_mtcars_dot.png" width="30%" /></a>
    </tr>
  </td>
  <td>
    <tr>
      <a href="../../img/alt_mtcars_scatter_color.png"><img src="../../img/alt_mtcars_scatter_color.png" width="30%" /></a>
    </tr>
  </td>
</table>
</div>
</div>
